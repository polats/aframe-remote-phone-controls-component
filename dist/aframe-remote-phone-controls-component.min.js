!function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("remote-phone-controls",{dependencies:["raycaster"],schema:{target:{type:"selector"}},multiple:!1,init:function(){this.data.raycast_rotation={x:0,y:0,z:0},this.data.remotephonestate={orientation:{},touching:!1},this.data.orientation={alpha:0,beta:0,gamma:0,initial_value:null},this.data.raycast_initialized=!1;var t=this.el,e=this.data;if(null===e.target){var a=document.querySelector("a-cursor");if(null===a)return void console.warn("Please put a-cursor in a document");e.target=a}var i=e.orientation,n=e.remotephonestate;window.addEventListener("deviceorientation",function(t){n.orientation.alpha=t.alpha,n.orientation.beta=t.beta,n.orientation.gamma=t.gamma},!0),window.addEventListener("touchstart",function(t){null!=i.initial_value&&(i.initial_value={alpha:i.alpha,beta:i.beta,gamma:i.gamma})},!0),t.addEventListener("raycaster-intersection",function(t){function a(t){for(var a=0,i=t.length;a<i;a++)if(e.target!==t[a].object.el&&!t[a].object.el.classList.contains("ignore-ray"))return t[a];return null}var i=a(t.detail.intersections);if(i){var n=i.object.matrixWorld;n.setPosition(new THREE.Vector3(0,0,0));var o=i.face.normal.clone().applyMatrix4(n).normalize(),r=(new THREE.Vector3).addVectors(i.point,o);e.target.object3D.lookAt(r);var l=(new THREE.Vector3).addVectors(i.point,o.multiplyScalar(.05));e.target.setAttribute("position",l)}})},update:function(t){},remove:function(){},updateOrientation:function(){var t=this.getRemotePhoneState(),e=this.data,a=e.orientation;null==a.initial_value&&void 0!=t.orientation.alpha&&(a.initial_value={alpha:t.orientation.alpha,beta:t.orientation.beta,gamma:t.orientation.gamma},e.raycast_initialized=!0),e.raycast_initialized&&(a.alpha=t.orientation.alpha,a.beta=t.orientation.beta,a.gamma=t.orientation.gamma)},tick:function(t){var e=this.data,a=this.el;if(this.updateOrientation(),e.raycast_initialized){var i=a.getAttribute("rotation");i.y=e.orientation.alpha-e.orientation.initial_value.alpha,i.x=e.orientation.beta-e.orientation.initial_value.beta,a.setAttribute("rotation",i),i=a.getAttribute("rotation")}},pause:function(){},play:function(){},getRemotePhoneState:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getRemotePhoneState():this.data.remotephonestate},isProxied:function(){var t=this.el.sceneEl.components["proxy-controls"];return t&&t.isConnected()}})}]);